{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst btnStart = document.querySelector('button[data-start]');\nconst dateTimePicker = document.querySelector('#datetime-picker');\nconst dataDays = document.querySelector('[data-days]');\nconst dataHours = document.querySelector('[data-hours]');\nconst dataMinutes = document.querySelector('[data-minutes]');\nconst dataSeconds = document.querySelector('[data-seconds]');\n\nbtnStart.setAttribute('disabled', true);\n\nconst timerInterval = 1000;\nlet currentDate = new Date();\nlet selectedDate = null;\nlet timeToFinish = null;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose: handleDateSelection,\n};\n\nflatpickr(\"#datetime-picker\", options);\nbtnStart.addEventListener('click', handleStartButtonClick);\n\nlet intervalId = null;\n\nfunction handleDateSelection(selectedDates) {\n  selectedDate = selectedDates[0];\n  timeToFinish = selectedDate - currentDate;\n\n  if (timeToFinish > 0) {\n    btnStart.removeAttribute('disabled');\n  } else {\n    Notify.failure('Будь ласка, виберіть дату в майбутньому', { timeout: 2000 });\n    btnStart.setAttribute('disabled', true);\n  }\n}\n\nfunction handleStartButtonClick() {\n  if (timeToFinish > 0) {\n    startTimer();\n    btnStart.setAttribute('disabled', true);\n    dateTimePicker.setAttribute('disabled', true);\n  }\n}\n\nfunction startTimer() {\n  intervalId = setInterval(updateTimer, timerInterval);\n}\n\nfunction updateTimer() {\n  timeToFinish -= timerInterval;\n  if (timeToFinish < 1000) {\n    stopTimer();\n    Notify.success('Час завершено', { timeout: 2000 });\n  }\n  updateInterface();\n}\n\nfunction stopTimer() {\n  clearInterval(intervalId);\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero({ days, hours, minutes, seconds }) {\n  const changeFormatDays = days.toString().padStart(2, \"0\");\n  const changeFormatHours = hours.toString().padStart(2, \"0\");\n  const changeFormatMinutes = minutes.toString().padStart(2, \"0\");\n  const changeFormatSeconds = seconds.toString().padStart(2, \"0\");\n\n  return { changeFormatDays, changeFormatHours, changeFormatMinutes, changeFormatSeconds };\n}\n\nfunction updateInterface() {\n  const formattedTime = addLeadingZero(convertMs(timeToFinish));\n  dataDays.textContent = formattedTime.changeFormatDays;\n  dataHours.textContent = formattedTime.changeFormatHours;\n  dataMinutes.textContent = formattedTime.changeFormatMinutes;\n  dataSeconds.textContent = formattedTime.changeFormatSeconds;\n}\n"],"names":["btnStart","dateTimePicker","dataDays","dataHours","dataMinutes","dataSeconds","timerInterval","currentDate","selectedDate","timeToFinish","options","handleDateSelection","flatpickr","handleStartButtonClick","intervalId","selectedDates","startTimer","updateTimer","stopTimer","updateInterface","convertMs","ms","days","hours","minutes","seconds","addLeadingZero","changeFormatDays","changeFormatHours","changeFormatMinutes","changeFormatSeconds","formattedTime"],"mappings":"wIAMA,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAiB,SAAS,cAAc,kBAAkB,EAC1DC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAE3DL,EAAS,aAAa,WAAY,EAAI,EAEtC,MAAMM,EAAgB,IACtB,IAAIC,EAAc,IAAI,KAClBC,EAAe,KACfC,EAAe,KAEnB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAASC,CACX,EAEAC,EAAU,mBAAoBF,CAAO,EACrCV,EAAS,iBAAiB,QAASa,CAAsB,EAEzD,IAAIC,EAAa,KAEjB,SAASH,EAAoBI,EAAe,CAC1CP,EAAeO,EAAc,CAAC,EAC9BN,EAAeD,EAAeD,EAE1BE,EAAe,EACjBT,EAAS,gBAAgB,UAAU,GAEnC,OAAO,QAAQ,0CAA2C,CAAE,QAAS,GAAM,CAAA,EAC3EA,EAAS,aAAa,WAAY,EAAI,EAE1C,CAEA,SAASa,GAAyB,CAC5BJ,EAAe,IACjBO,IACAhB,EAAS,aAAa,WAAY,EAAI,EACtCC,EAAe,aAAa,WAAY,EAAI,EAEhD,CAEA,SAASe,GAAa,CACpBF,EAAa,YAAYG,EAAaX,CAAa,CACrD,CAEA,SAASW,GAAc,CACrBR,GAAgBH,EACZG,EAAe,MACjBS,IACA,OAAO,QAAQ,gBAAiB,CAAE,QAAS,GAAM,CAAA,GAEnDC,GACF,CAEA,SAASD,GAAY,CACnB,cAAcJ,CAAU,CAC1B,CAEA,SAASM,EAAUC,EAAI,CAMrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASC,EAAe,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACzD,MAAME,EAAmBL,EAAK,SAAQ,EAAG,SAAS,EAAG,GAAG,EAClDM,EAAoBL,EAAM,SAAQ,EAAG,SAAS,EAAG,GAAG,EACpDM,EAAsBL,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,EACxDM,EAAsBL,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,EAE9D,MAAO,CAAE,iBAAAE,EAAkB,kBAAAC,EAAmB,oBAAAC,EAAqB,oBAAAC,CAAmB,CACxF,CAEA,SAASX,GAAkB,CACzB,MAAMY,EAAgBL,EAAeN,EAAUX,CAAY,CAAC,EAC5DP,EAAS,YAAc6B,EAAc,iBACrC5B,EAAU,YAAc4B,EAAc,kBACtC3B,EAAY,YAAc2B,EAAc,oBACxC1B,EAAY,YAAc0B,EAAc,mBAC1C"}